angular.module("MisterFantastic",["ngRoute","angularCharts"]).config(["$interpolateProvider",function(t){t.startSymbol("{$"),t.endSymbol("$}")}]).config(["$routeProvider",function(t){t.when("/project",{controller:"ProjectCtrl",templateUrl:"/static/FrontEnd/js/templates/project.html"}).when("/team",{controller:"TeamCtrl",templateUrl:"/static/FrontEnd/js/templates/team.html"}).when("/programmer",{controller:"ProgrammerCtrl",templateUrl:"/static/FrontEnd/js/templates/programmer.html"}).when("/login",{controller:"LoginCtrl",templateUrl:"/static/FrontEnd/js/templates/login.html"}).when("/moderation",{controller:"ModerCtrl",templateUrl:"/static/FrontEnd/js/templates/moderation.html"}).otherwise({redirectTo:"/login"})}]).value("Dictionary",{txtDesc:["Statistics of your Git repositories","Статистика Ваших Git репозиториев"],inpLink:["Link to Git repository","Ссылка на Git репозиторий"],inpUser:["User","Пользователь"],inpPass:["Password","Пароль"],inpStart:["Start scanning","Начать сканирование"],titleLang:["Сменить язык","Change language"],menuProject:["About project","О проекте"],menuTeams:["About teams","О командах"],menuProgrammer:["About programmers","О разработчиках"],programmerSelector:["Choose programmer","Выберите программиста"],teamSelector:["Choose team","Выберите команду"],moderTitle:["The repository has been sent for moderation.","Репозиторий отправлен на модерацию."],moderText:["Moderation takes place during the day. After this time you will get access to the statistics of the repository.","Модерация проходит в течении суток. По истечению этого времени Вы получите доступ к статистике репозитория."]}).factory("$getData",["$http",function(t){return function(e,r,o){t({url:"static/FrontEnd/js/data.big.json",method:"GET"}).success(o)}}]).factory("draw",[function(){return function(t){function r(){e.zoomToIndexes(e.dataProvider.length-10,e.dataProvider.length-1)}var e=AmCharts.makeChart("chartdiv",{type:"serial",theme:"patterns",pathToImages:"http://www.amcharts.com/lib/3/images/",dataDateFormat:"YYYY-MM-DD",valueAxes:[{id:"v1",axisAlpha:0,position:"left"},{id:"v2",axisAlpha:0,position:"left"}],graphs:[{id:"g1",balloonText:"New [[value]] lines",lineColor:"#009900",bullet:"round",bulletBorderAlpha:1,bulletColor:"#00ff00",bulletSize:5,hideBulletsCount:50,lineThickness:2,title:"red line",useLineColorForBulletBorder:!0,valueField:"new"},{id:"g2",balloonText:"Del [[value]] lines",lineColor:"#cc0000",bullet:"round",bulletBorderAlpha:1,bulletColor:"#ff0000",bulletSize:10,hideBulletsCount:50,lineThickness:2,title:"red line",useLineColorForBulletBorder:!0,valueField:"del",type:"smoothedLine"}],chartScrollbar:{graph:"g1",scrollbarHeight:30},chartCursor:{cursorPosition:"mouse",pan:!0,valueLineEnabled:!0,valueLineBalloonEnabled:!0},categoryField:"date",categoryAxis:{parseDates:!0,dashLength:1,minorGridEnabled:!0,position:"top"},dataProvider:t});e.addListener("rendered",r),r()}}]).factory("summ",[function(){return function(t){for(var e=[0,0,0],r=0,o=t.length;o>r;r++)e[0]+=t[r].new,e[1]+=t[r].del;return e[2]=e[0]-e[1],e}}]).controller("MainCtrl",["$scope","$rootScope","$location","Dictionary",function(t,e,r,o){t.lang=1,t.changeLang=function(){t.lang=(t.lang+1)%2},t.hideMenu=function(){return"/login"===r.path()||"/moderation"===r.path()},t.dic=o}]).controller("LoginCtrl",["$scope",function(){}]).controller("ModerCtrl",["$scope",function(){}]).controller("ProjectCtrl",["$scope","$getData",function(t,e){e("static/data.big.json",{},function(e){t.project=e.project})}]).controller("TeamCtrl",["$scope","$getData","draw","summ",function(t,e,r,o){function n(e){for(var r=[],o=[],n=[],a=0,l=t.project.programmers.length;l>a;a++)t.project.programmers[a].team==e&&r.push(t.project.programmers[a].id);for(var a=0,l=t.project.commits.length;l>a;a++)r.indexOf(t.project.commits[a].programmer)>=0&&n.push(t.project.commits[a]);o.push(n[0]);for(var a=1,l=n.length;l>a;a++)n[a].date==o[o.length-1].date?(o[o.length-1].del+=n[a].del,o[o.length-1].new+=n[a].new):o.push(n[a]);return o}e("static/data.big.json",{},function(e){t.project=e.project,t.$watch("teams",function(e){e&&(r(n(t.teams.id)),t.nums=o(n(t.proger.id)))})})}]).controller("ProgrammerCtrl",["$scope","$getData","draw","summ",function(t,e,r,o){function n(e){for(var r=[],o=0,n=t.project.commits.length;n>o;o++)t.project.commits[o].programmer==e&&r.push(t.project.commits[o]);return r}e("static/frontend/js/data.big.json",{},function(e){t.project=e.project,t.$watch("proger",function(e){e&&(r(n(t.proger.id)),t.nums=o(n(t.proger.id)))})})}]);